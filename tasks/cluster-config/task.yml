platform: linux

image_resource:
  type: docker-image
  source:
    repository: eirini/ibmcloud

inputs:
  - name: ci-resources
  - name: cluster-state

outputs:
  - name: state-modified

params:
  IBMCLOUD_ACCOUNT:
  IBMCLOUD_USER:
  IBMCLOUD_PASSWORD:
  CLUSTER_NAME:
  STORAGE_CLASS:
  IMAGE_TAG:
  CLUSTER_ADMIN_PASSWORD:
  UAA_ADMIN_CLIENT_SECRET:
  NATS_PASSWORD:
  ENABLE_OPI_STAGING:
  DIEGO_CELL_COUNT:

run:
  path: ci-resources/tasks/cluster-config/task.sh
