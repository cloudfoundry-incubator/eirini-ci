groups:
- name: all
  jobs:
  - delete-cluster-ci
  - create-cluster-ci
  - prepare-cluster-ci
  - verify-helm-deployment
  - run-tests
  - run-integration-tests
  - create-go-docker-images
  - create-secret-smuggler-docker-image
  - run-fluentd-unit-tests
  - create-fluentd-docker-image
  - staging-test
  - create-staging-docker-images
  - update-eirini-version-files
  - update-fluentd-version-files
  - update-secret-smuggler-version-files
  - update-staging-version-files
  - fast-forward-release
  - bump-go-modules-eirini
  - bump-go-modules-eirinifs
  - delete-cluster-((gcp-cluster-name))
  - create-cluster-((gcp-cluster-name))
  - deploy-eirini-yamls-((gcp-cluster-name))
  - run-eats-tests-((gcp-cluster-name))

- name: bumps
  jobs:
  - bump-go-modules-eirini
  - bump-go-modules-eirinifs

- name: cluster-ci
  jobs:
  - delete-cluster-ci
  - create-cluster-ci
  - prepare-cluster-ci

- name: cluster-((gcp-cluster-name))
  jobs:
  - delete-cluster-((gcp-cluster-name))
  - create-cluster-((gcp-cluster-name))

- name: test-and-build-((gcp-cluster-name))
  jobs:
  - deploy-eirini-yamls-((gcp-cluster-name))
  - run-eats-tests-((gcp-cluster-name))


- name: test-and-build
  jobs:
  - run-tests
  - create-go-docker-images
  - create-secret-smuggler-docker-image
  - run-fluentd-unit-tests
  - create-fluentd-docker-image
  - staging-test
  - create-staging-docker-images
  - verify-helm-deployment
  - run-integration-tests

- name: update-version-files
  jobs:
  - update-eirini-version-files
  - update-fluentd-version-files
  - update-secret-smuggler-version-files
  - update-staging-version-files
